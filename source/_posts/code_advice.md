---
title: 关于C语言编码的一些建议
date: 2021-10-12 20:14:05
top_img: false
categories:
  - C/C++
tags:
  - 规范
  - 教程
cover: https://image.emptydreams.xyz/bg/b12.jpg!/fxfn2/550x500
description: 简单总结一下我对一些代码的建议。
---

## 前言

&emsp;&emsp;这篇文章可以看作对我之前写的“[浅读C语言代码规范](https://blog.emptydreams.xyz/c_standard)”的一些补充，但是本篇内容仅个人看法，具体是否采用还需读者自己评估。

&emsp;&emsp;该文内容不定时补充，为了看过旧版内容的读者更方便，新的内容会放在前面。

---

## [2022-1-5]

### 变量集中声明的注意事项

&emsp;&emsp;如果使用变量集中声明的声明方式，请一定注意以下内容：

1. 严格遵守命名规则，否则变量会一团糟
2. 要么统一都赋初值，要么统一不赋初值，避免阅读代码时还需要来回折跃查看变量是否初始化
3. 推荐使用就近原则<sub>（说到底还是觉得这方法不好用）</sub>

## [2021-10-13]

### goto语句的使用

&emsp;&emsp;`goto`是`C/C++`中一个强大的功能，但是由于其功能过于强大，容易引发各种各样的问题，且会导致程序的控制流难以追踪，并不推荐使用。绝大多数情况下，任何能用其它语句代替的`goto`都不应当使用`goto`编写，除非是使用`goto`来跳出外部循环。

### 善用快捷键

&emsp;&emsp;善用系统和IDE的快捷键可以让我们的编码速度更快，也可以更便捷的进行调试等操作。如果是JBS平台的用户，可以安装`Key Promoter X`这个插件，在你用鼠标进行操作时会提醒你对应的快捷键是什么，如果你频繁进行某项操作但其没有快捷键，它也会提醒你可以自己设置一个快捷键。

---

## [2021-10-12]

### 变量声明位置

&emsp;&emsp;在`C99`（不了解C90、C99、C11是什么的话自行百度一下）之前，C语言要求函数内的变量必须在函数头声明。这一方面虽然可以通过函数头的变量说明函数的大致内容，但是也造成了一些麻烦：

<ul>
    <li>编码时经常需要从当前编辑的地方回到函数头补上需要用到的变量声明</li>
    <li>容易忘记赋初值</li>
    <li>某些变量只需用到一次，写在开头反而更乱</li>
</ul>

&emsp;&emsp;自`C99`开始，C语言取消了这一限制，变量的声明可以写在函数中的任意位置（前提是符合语法）。个人更倾向于就近原则，即使用时再声明。

&emsp;&emsp;如果读者想要使用前一种方式的话，我也推荐将临时用到的变量声明（比如`for循环`中用到的控制变量）在使用的位置，这样子可以让代码更直观。

### 布尔类型

&emsp;&emsp;C语言中经常使用`int`来表示真假。比如下面的代码：

```C
int main() {
    int k = 0;
    if (k) {
        printf("true");
    } else {
        printf("false");
    }
    return 0;
}
```

&emsp;&emsp;上面的代码完全可以正常运行，但是这实际上是一种非常麻烦并且容易出错的写法。首先，编码的人和阅读的人都需要思考，到底`0`和`1`哪一个代表`true`。其次，在复杂一些的环境中，这种写法会令人难以快速排出错误。

&emsp;&emsp;如何避免上述的问题？其实很简单，使用C语言的库中提供的`_Bool`即可，该类型只有`true`和`false`两个值，并且英文单词比单个数字更加直观易懂。如果嫌`_Bool`打起来麻烦的话，可以使用`stdbool.h`头文件中定义的`bool`。

### 统一代码风格

&emsp;&emsp;如果你的代码中使用了某一种代码风格，那么，请在程序中保持这个风格，不同风格的代码混杂在一起相当于没有规范的代码。

### 读懂编译报错

&emsp;&emsp;如果代码存在编译错误，编译器会给出错误信息，这些信息通常是英文，如果你看不懂的话不妨把信息复制到网络上搜索一下，很容易就能找到问题原因和解决方法。

&emsp;&emsp;这里强调一点，编译错误是编码过程中最容易解决的错误（除了IDE判断错误导致报错位置或信息不对的情况），遇到编译错误一定要自己想办法解决。
